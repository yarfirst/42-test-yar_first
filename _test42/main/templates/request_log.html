{% extends "base.html" %}

{% block content %}
<table>
	<tr>
		<td>DateTime</td><td>Method</td><td>Url</td>><td>Order</td><td>*</td>
	</tr>
	{% for r in request_logs %}
	<tr id="request_log_{{ r.id }}">
		<td>{{ r.datetime|date:'Y-m-d H:i' }}</td><td>{{ r.method }}</td>
		<td>{{ r.url }}</td><td>{{ r.order }}</td>
		<td>
			<a href="javascript:{}" class="js_delete" entry="{% url request_log_delete entry_id=r.id %}">Delete</a>
		</td>
	</tr>
	{% endfor %}
</table>

<hr />

<a href="{% url profile%}">profile</a>
{% endblock %}

{% block scripts %}
	{{ block.super }}
	<script type="text/javascript">
		$(document).ready(function(){
			$('.js_delete').on('click', function(){
				$.ajax({
					url: $(this).attr('entry')
				}).done(function(resp) {
					if (resp.entry_id !== undefined){
						$('#request_log_' + resp.entry_id).remove();
					}
				});
			});
		});
	</script>
{% endblock %}
